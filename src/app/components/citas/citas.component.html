<!-- Componente para visualizar citas realizadas -->
<div class="max-w-7xl mx-auto my-24 bg-gray-100 p-8 rounded-xl">
    <h2 class="text-3xl font-bold mb-4 px-8 py-2">Mis Citas.</h2>
  
    <!-- component -->
    <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full max-w-full px-3 mb-6  mx-auto">
        <div class="relative flex-[1_auto] flex flex-col break-words min-w-0 bg-clip-border rounded-[.95rem] bg-white m-5">
        <div class="relative flex flex-col min-w-0 break-words border border-dashed bg-clip-border rounded-2xl border-stone-200 bg-light/30">
            <!-- card header -->
            <div class="px-9 pt-5 flex justify-between items-stretch flex-wrap min-h-[70px] pb-0 bg-transparent">
            <h3 class="flex flex-col items-start justify-center m-2 ml-0 font-medium text-xl/tight text-dark">
                <span class="mr-3 font-semibold text-dark">Citas Realizadas</span>
            </h3>
            <div class="relative flex flex-wrap items-center my-2">
                <button (click)="toggleModal()" type="button" class="text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-full text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700">CREAR CITA</button>
            </div>
            </div>
            <!-- end card header -->
            <!-- card body  -->
            <div class="flex-auto block py-8 pt-6 px-9">
                <div class="overflow-x-auto">
                    <table class="w-full my-0 align-middle text-dark border-neutral-200">
                    <thead class="align-bottom">
                        <tr class="font-semibold text-[0.95rem] text-secondary-dark">
                        <th class="pb-3 text-start min-w-[175px]">CITAS</th>
                        <th class="pb-3 text-end min-w-[100px]">HORA</th>
                        <th class="pb-3 pr-12 text-end min-w-[175px]">ESTADO</th>
                        <th class="pb-3 pr-12 text-end min-w-[100px]">FECHA</th>
                        <th class="pb-3 text-end min-w-[50px]">DETALLES</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let hora of getHoras()">
                        <tr class="border-b border-dashed last:border-b-0" *ngFor="let cita of getCitasPorHora(hora)">
                        <td class="p-3 pl-0">
                            <div class="flex items-center">
                            <div class="relative inline-block shrink-0 rounded-2xl me-3">
                                <img src="https://randomuser.me/api/portraits/women/86.jpg" class="w-[50px] h-[50px] inline-block shrink-0 rounded-2xl" alt="">
                            </div>
                            <div class="flex flex-col justify-start">
                                <a href="javascript:void(0)" class="mb-1 font-semibold transition-colors duration-200 ease-in-out text-lg/normal text-secondary-inverse hover:text-primary"> Ariana Grande </a>
                            </div>
                            </div>
                        </td>
                        
                        <td class="p-3 pr-0 text-end">
                            <span class="text-center align-baseline inline-flex px-2 py-1 mr-auto items-center font-semibold text-base/none text-success bg-success-light rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-1">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                  </svg> {{ hora }} </span>
                        </td>
                        <td class="p-3 pr-12 text-end">
                            <span class="bg-green-200 text-green-900 text-sm font-medium me-2 px-2.5 py-0.5 rounded">{{ cita.estadoCita }}</span>
    
                        </td>
                        <td class="pr-0 text-start">
                            <span class="font-semibold text-light-inverse text-md/normal">{{ cita.fecha }}</span>
                        </td>
                        <td class="p-3 pr-0 text-end">
                            <button class="ml-auto relative text-secondary-dark bg-light-dark hover:text-primary flex items-center h-[25px] w-[25px] text-base font-medium leading-normal text-center align-middle cursor-pointer rounded-2xl transition-colors duration-200 ease-in-out shadow-none border-0 justify-center">
                            <span class="flex items-center justify-center p-0 m-0 leading-none shrink-0 ">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                </svg>
                            </span>
                            </button>
                        </td>
                        </tr>
                    </tbody>
                    </table>
                </div>
            </div>
        </div>
        </div>
    </div>
    </div>
    
</div>
<!-- Modal -->
<div *ngIf="isOpen" class="modal">
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!--
          Background backdrop, show/hide based on modal state.
      
          Entering: "ease-out duration-300"
            From: "opacity-0"
            To: "opacity-100"
          Leaving: "ease-in duration-200"
            From: "opacity-100"
            To: "opacity-0"
        -->
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
      
        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
          <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <!--
              Modal panel, show/hide based on modal state.
      
              Entering: "ease-out duration-300"
                From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                To: "opacity-100 translate-y-0 sm:scale-100"
              Leaving: "ease-in duration-200"
                From: "opacity-100 translate-y-0 sm:scale-100"
                To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
            -->
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
              <form class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                <div class="">
                  <h1 class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left text-2xl font-bold mb-5">Crear Cita</h1>
                  <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                    <div class="mb-4">
                        <div class="mb-4">
                            <label for="birthdate" class="block text-gray-700 text-sm font-semibold mb-2">Fecha *</label>
                            <input type="date" id="birthdate" class="form-input w-full px-4 py-2 border rounded-lg text-gray-700 focus:ring-blue-500" required name="birthdate" [(ngModel)]="fecha">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="fullName" class="block text-gray-700 text-sm font-semibold mb-2">Hora *</label>
                        <input type="text" placeholder="5:40" id="fullName" name="fullName"  class="form-input w-full px-4 py-2 border rounded-lg text-gray-700 focus:ring-blue-500" [(ngModel)]="hora">
                    </div>
                  </div>
                </div>
              </form>
              <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                <button type="button" class="inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto" (click)="guardarCita()">Accept</button>
                <button type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" (click)="toggleModal()">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
</div>

<div class="fixed bottom-5 right-0 m-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg" role="alert" *ngIf="loginSuccess">
    <p class="font-bold">Registro Exitoso</p>
    <p>Tu registro de cita se ha completado con éxito. ¡Vuelve pronto para revisar si fuiste aprobado!</p>
  </div>

  
<div class="fixed bottom-5 right-0 m-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg" role="alert" *ngIf="loginError">
    <p class="font-bold">Registro Fallido</p>
    <p>Tu registro de cita ha fallado. ¡Aegurate de introducir los datos completos y dentro del rango de horarios!</p>
  </div>